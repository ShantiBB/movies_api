# Тестовое задание - Django проект с PostgreSQL

Проект представляет собой API для работы с фильмами, использующий Django, PostgreSQL и Docker для контейнеризации базы данных.  
Для аутентификации используется библиотека Djoser.  
Для управления зависимостями в проекте используется Poetry.

## Стек технологий
- Django: Фреймворк для разработки веб-приложений на Python.
- Django REST Framework (DRF): Для создания API и работы с сериализаторами.
- PostgreSQL: Реляционная база данных.
- Docker: Для контейнеризации базы данных PostgreSQL.
- Poetry: Для управления зависимостями.
- Djoser: Для аутентификации через токены.

## Развертывание проекта

### Склонируйте репозиторий:

```bash
git@github.com:ShantiBB/movies_api.git
cd movies_api
```

### Активация окружения:
```bash
python3 -m venv venv
source venv/bin/activate (для unix систем)
source venv/Scripts/activate (для windows систем)
```

### Устанавка и инициализация poetry:
```bash
pip install poetry
poetry init
poetry install
```

### Инициализация docker образа:
```bash
docker compose -f pg_docker/docker-compose-pg.yml up -d
```

### Запуск проекта и применение миграций:
```bash
python manage.py makemigrations
python manage.py migrate
python manage.py createsuperuser
python manage.py runserver
```

## Документация по эндпоинтам API

### Список фильмов и создание

Эндпоинт: /movies/  
Методы:  
- GET: Получить список всех фильмов.  
- POST: Создать новый фильм.  

### Детали фильма (Получение, Обновление, Удаление)

Эндпоинт: /movies/<int:pk>/  
Методы:  
- GET: Получить подробную информацию о фильме по ID (pk).  
- PATCH: Обновить информацию о фильме с указанным ID (pk).  
- DELETE: Удалить фильм с указанным ID (pk).  

### Избранное (Добавление и Удаление)

Эндпоинт: /movies/<int:pk>/favorite/  
Методы:  
- POST: Добавить фильм с указанным ID (pk) в избранное пользователя.  
- DELETE: Удалить фильм с указанным ID (pk) из избранного.  


## Права доступа
### Список фильмов и создание:
- IsAuthenticatedOrReadOnly — доступ для чтения открыт для всех, но доступ для записи только для авторизованных пользователей.
### Детали фильма:
- IsAuthorOrReadOnly — доступ для чтения открыт для всех, но доступ для записи и удаления только для автора фильма.
### Избранное:
- IsAuthenticated — доступ для добавления и удаления фильмов из избранного только для авторизованных пользователей.
### Анонимный пользователь (создание):
- IsAnonCreateUser — доступ только для анонимных пользователей, разрешает создание пользователя.
### Аутентифицированный пользователь или только для чтения:
- IsAuthUserOrReadOnly — доступ для аутентифицированных пользователей с правами на запись, а для анонимных — только для чтения. Используется для эндпоинта me или подобных операций, где требуется разграничение доступа.
### Открытый доступ для токенов:
- AllowAnyToken — разрешает доступ всем пользователям, для операций с токенами.
